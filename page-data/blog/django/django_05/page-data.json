{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/django/django_05","result":{"data":{"markdownRemark":{"html":"<h2>2장 장고 기본요소</h2>\n<h3>05 - URL 더 똑똑하게 사용하기 Name pace</h3>\n<ul>\n<li>\n<p>urls.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\napp_name <span class=\"token operator\">=</span> <span class=\"token string\">\"pybo\"</span>\n<span class=\"token comment\"># 네임스페이스 앱이 관리하는 독립된 이름공간</span>\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"index\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;int:q_id>/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Detail<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"detail\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># path(\"test/\", views.Test),</span>\n    <span class=\"token comment\"># 테스트를 불러와서 뿌림</span>\n    <span class=\"token comment\"># name=\"이름\" 별칭 지정</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>template</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\"><span class=\"token namespace\">pybo:</span>detail\"</span> <span class=\"token attr-name\">q.id</span> <span class=\"token attr-name\">%}\"</span><span class=\"token punctuation\">></span></span>{{q.subject}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!--\n href 안\n url : url맵핑\n pybo : namesplace\n detail : 별칭\n --></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>06 - 답변 등록기능 만들기 form</h3>\n<ul>\n<li>장고폼을 이용하지 않고 작성</li>\n<li>\n<p>urls.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\napp_name <span class=\"token operator\">=</span> <span class=\"token string\">\"pybo\"</span>\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"index\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;int:q_id>/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Detail<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"detail\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># path(\"test/\", views.Test),</span>\n    <span class=\"token comment\"># 테스트를 불러와서 뿌림 url/test/ 에</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"answer/create/&lt;int:q_id>/\"</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>Answer_create<span class=\"token punctuation\">,</span>  name<span class=\"token operator\">=</span><span class=\"token string\">\"answer_create\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">#</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>views.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">Answer_create</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> q_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\" Answer Create Definition \"\"\"</span>\n\nquestion <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>q_id<span class=\"token punctuation\">)</span>\nquestion<span class=\"token punctuation\">.</span>answer_set<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n    content<span class=\"token operator\">=</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"content\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> create_date<span class=\"token operator\">=</span>timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># Question 에서 answer_set을 가져와서 새로 데이터 작성</span>\n<span class=\"token comment\"># content는 템플릿에서 textarea name=\"content\"</span>\n<span class=\"token comment\"># 답변이 등록</span>\n<span class=\"token keyword\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token string\">\"pybo:detail\"</span><span class=\"token punctuation\">,</span> q_id<span class=\"token operator\">=</span>q_id<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 답변이 등록 된 후 리다이렉트.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>template</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{question.subject}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>{{question.content}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h5</span><span class=\"token punctuation\">></span></span>{{question.answer_set.count}}개의 답변이 있습니다.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h5</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!--Question 안의 forienkey의 answer_set을 count해서 int로 출력--></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n\n        {% for a in question.answer_set.all  %}\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>{{a.content}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        {% endfor %}\n        <span class=\"token comment\">&lt;!--answer_set 을 전부 가져와서 뿌림--></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">\"</span></span><span class=\"token attr-name\"><span class=\"token namespace\">pybo:</span>answer_create\"</span> <span class=\"token attr-name\">question.id</span> <span class=\"token attr-name\">%}\"</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    {% csrf_token %}\n    <span class=\"token comment\">&lt;!--\n        보안관련\n        form을 통해 전송된 데이터가 실제로 웹 브라우저에서 작성된 데이터인지 판단\n        form밑에 항상 따라와야 한다.\n    --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rows</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>15<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>답변등록<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>query에서 dir, vars 객체조회</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">shell\n<span class=\"token operator\">>></span> <span class=\"token keyword\">from</span> 앱<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> 함수\n<span class=\"token operator\">>></span> v <span class=\"token operator\">=</span> 함수<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span> <span class=\"token builtin\">dir</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span> <span class=\"token builtin\">vars</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>","excerpt":"2장 장고 기본요소 05 - URL 더 똑똑하게 사용하기 Name pace urls.py template 06 - 답변 등록기능 만들기 form 장고폼을 이용하지 않고 작성 urls.py views.py template query에서 dir, vars 객체조회","frontmatter":{"date":"22 April, 2021","path":"/blog/django/django_05","title":"Dj05 namespac, form"},"fields":{"readingTime":{"text":"2 min read"}}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}