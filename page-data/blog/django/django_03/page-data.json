{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/django/django_03","result":{"data":{"markdownRemark":{"html":"<h2>2장 장고 기본요소</h2>\n<h3>02 - 데이터관리와 Models</h3>\n<h4>01 migrate와 테이블</h4>\n<ul>\n<li>\n<p>config/settings.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"django.contrib.admin\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.auth\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.contenttypes\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.sessions\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.messages\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.staticfiles\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>장고 프로젝트에 설치된 앱.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">DATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"ENGINE\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"django.db.backends.sqlite3\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"NAME\"</span><span class=\"token punctuation\">:</span> BASE_DIR <span class=\"token operator\">/</span> <span class=\"token string\">\"db.sqlite3\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>데이터베이스에 대한 정의</li>\n<li>\"ENGINE\" : 데이터베이스 엔진</li>\n<li>\"NAME\" : BASE_DIR안에 위치한 파일</li>\n</ul>\n</li>\n<li>\n<p>데이터 테이블 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-terminal line-numbers\"><code class=\"language-terminal\">$ python manage.py migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ul>\n<li>migrate를 통해 설치된 앱이 사용하는 데이터 테이블을 생성</li>\n</ul>\n</li>\n<li>\n<p>모델 작성</p>\n<ul>\n<li>pybo에서 사용할 모델을 작성</li>\n<li>pybo/models.py</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  subject <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n  content <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>TextField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  create_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n      <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>subject\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Answer</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  question <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n  content <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>TextField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  create_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateTimeField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Question, Answer모델의 작성</li>\n<li>장고에서 임포트한 모델 클래스를 기반으로 데이터테이블의 형태를 정의</li>\n<li><a href=\"https://docs.djangoproject.com/en/3.0/ref/models/fields/\">모델의 속성 공식문서</a></li>\n<li><strong>str</strong>메소드 : 데이터 조회시 표시할 이름</li>\n</ul>\n</li>\n<li>\n<p>앱 설치</p>\n<ul>\n<li>config/settings.py</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">DJANGO_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"django.contrib.admin\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.auth\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.contenttypes\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.sessions\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.messages\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"django.contrib.staticfiles\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\nPROJECT_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"pybo.apps.PyboConfig\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\nINSTALLED_APPS <span class=\"token operator\">=</span> DJANGO_APPS <span class=\"token operator\">+</span> PROJECT_APPS</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>장고앱과 프로젝트 앱을 나눠서 관리.</li>\n<li>pybo/apps.py</li>\n<li>장고에서 만들어준 앱을 정의하는 파일</li>\n<li>appNameConfig클래스를 settings.py에 등록</li>\n</ul>\n</li>\n<li>\n<p>모델 migrate</p>\n<ul>\n<li>\n<p>테이블 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-terminal line-numbers\"><code class=\"language-terminal\">$ python manage.py makemigrations\n$ python manage.py migrate</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n<li>makemigrations로 테이블작업을 하기위한 파일들을 생성</li>\n<li>migrate로 테이블 생성</li>\n</ul>\n</li>\n</ul>\n<h4>02 장고 셸 에서 데이터 CRUD</h4>\n<ul>\n<li>\n<p>장고 셸 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-terminal line-numbers\"><code class=\"language-terminal\">$ python manage.py shell</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>모델 임포트</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> AppName<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> ClassName</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>모델 데이터 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">v <span class=\"token operator\">=</span> ClassName<span class=\"token punctuation\">(</span>속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">,</span> 속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\nv<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li>save() : 데이터베이스에 저장하는 함수</li>\n</ul>\n</li>\n<li>\n<p>등록한 데이터 조회</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">ClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#속성의 조건으로 데이터 조회, 리스트형태(QuerySet)로 여러개를 반환</span>\n<span class=\"token comment\">#조건에 맞는 결과가 없을 시 빈 리스트 반환</span>\nClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#속성의 조건으로 데이터 조회, 1개의 데이터 반환</span>\n<span class=\"token comment\">#조건에 맞는 결과가 없을 시 에러</span>\n\nClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>속성__contains<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#속성에서 값을 포함하고 있는 데이터를 조회</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><a href=\"https://docs.djangoproject.com/en/3.0/topics/db/queries/\">Query 공식문서</a></li>\n</ul>\n</li>\n<li>\n<p>데이터 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">v <span class=\"token operator\">=</span> ClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#속성의 조건에 부합하는 데이터를 v에 저장</span>\nv<span class=\"token punctuation\">.</span>속성 <span class=\"token operator\">=</span> 수정값\nv<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>데이터 삭제</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\">v <span class=\"token operator\">=</span> ClassName<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>속성<span class=\"token operator\">=</span>값<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#속성의 조건에 부합하는 데이터를 v에 저장</span>\nv<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3>03 - Django Admin</h3>\n<h4>01 Django Admin</h4>\n<ul>\n<li>\n<p>create superuser</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-terminal line-numbers\"><code class=\"language-terminal\">$ python manage.py createsuperuser</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>Django Admin!</p>\n<ul>\n<li>장고 어드민화면에서 보이는 구조를 만든다.</li>\n<li>App/admin.py</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> 클래스이름\n\n<span class=\"token decorator annotation punctuation\">@admin<span class=\"token punctuation\">.</span>register</span><span class=\"token punctuation\">(</span>클래스이름<span class=\"token punctuation\">)</span> <span class=\"token comment\">#장고어드민 등록</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n  <span class=\"token triple-quoted-string string\">\"\"\" Question Admin Definition \"\"\"</span>\n  <span class=\"token comment\">#클래스 이름 정의</span>\n\n  search_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"subject\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">#장고어드민에서 서치필드 추가</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>다른 방법</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-python line-numbers\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> 클래스이름\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  search_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'subject'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">#장고어드민에서 서치필드 추가</span>\n\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>클래스이름<span class=\"token punctuation\">,</span> QuestionAdmin<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#장고어드민 등록</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><a href=\"https://docs.djangoproject.com/en/3.0/ref/contrib/admin/\">장고 어드민 공식문서</a></li>\n</ul>\n</li>\n</ul>","excerpt":"2장 장고 기본요소 02 - 데이터관리와 Models 01 migrate와 테이블 config/settings.py 장고 프로젝트에 설치된 앱. 데이터베이스에 대한 정의 \"ENGINE\" : 데이터베이스 엔진 \"NAME\" : BASE_DIR…","frontmatter":{"date":"20 April, 2021","path":"/blog/django/django_03","title":"Dj03 데이터관리와 Models"},"fields":{"readingTime":{"text":"3 min read"}}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}